# 需求分析

### 1.dashboard

=> 一个日历
=> 日历用来显示当天是否有任务，点击日期，就导航到任务创建页面（任务界面）
=> 最近任务推送
    => 重要任务提醒（特殊的，马上要结束的）
    => 自定义任务的重要程度，按照重要度降序排列
=> 任务完成情况
=> 引导，如何创建

### 2.任务

=> 如果没有任务，页面提示：快速开始一个新任务
=> 如果有任务，页面（侧边栏）：
    - 任务名称
=> 任务查询
    - 通过任务名称查询
=> 任务完成情况
    - 已完成
    - 未完成
=> 任务的内容
    - 可以自由添加步骤（实时的）
=> 单个任务的完成情况（进度条）


对于描述的需求，我们可以设计一个基本的数据库模型，以支持任务管理和日历功能。数据库将包含几个核心表格，用于存储用户任务、任务的状态、以及日历相关数据。下面是一种可能的数据库设计方案：

### 1. 用户表（Users）
存储用户的基本信息，每个用户可以有多个任务。
- 用户ID（主键）
- 用户名
- 密码（加密存储）
- 邮箱
- 注册日期

### 2. 任务表（Tasks）
存储与任务相关的所有信息。
- 任务ID（主键）
- 用户ID（外键，关联用户表）
- 任务名称
- 任务描述
- 创建日期
- 截止日期
- 任务状态（例如：未开始、进行中、已完成）
- 重要程度（自定义枚举值，如高、中、低）

### 3. 任务步骤表（TaskSteps）
为了支持任务可以有多个步骤，每个步骤的完成情况也需要被跟踪。
- 步骤ID（主键）
- 任务ID（外键，关联任务表）
- 步骤描述
- 步骤状态（例如：未开始、进行中、已完成）

### 4. 日历表（Calendars）
这个表格用来连接用户和他们的任务日历，以方便在特定日期查看任务。
- 日历项ID（主键）
- 用户ID（外键，关联用户表）
- 任务ID（外键，关联任务表）
- 日期

### 5. 任务提醒表（TaskReminders）
存储任务提醒的相关信息，尤其是那些需要特别提醒的重要任务。
- 提醒ID（主键）
- 任务ID（外键，关联任务表）
- 提醒时间
- 提醒类型（例如：邮件、短信、应用内通知）

这个数据库模型基本上覆盖了你所描述的功能需求，如任务的创建、任务状态管理、任务的步骤添加、以及通过日历查看任务。这个设计也支持通过任务名称进行搜索，任务的重要程度排序，以及展示任务完成情况。

在实际部署时，还可以考虑引入如安全性、备份和恢复等高级特性，以及可能的扩展，如支持团队协作等。


针对你的需求，任务系统中任务步骤的灵活添加是一个关键功能。我们需要设计一个能够随时增加、修改和删除步骤的数据库结构。这里是对任务步骤表的一种重新设计，更加注重灵活性和扩展性：

### 任务步骤表（TaskSteps）
此表用于存储任务的每一个步骤的具体信息，设计上要能够方便地增删改查步骤。

- **步骤ID（StepID）**：主键，唯一标识一个步骤。
- **任务ID（TaskID）**：外键，关联到任务表，表明这个步骤属于哪一个任务。
- **步骤顺序（StepOrder）**：表示步骤在任务中的顺序。这个字段允许用户对步骤进行重新排序，而不需要修改步骤的实际内容。
- **步骤描述（Description）**：具体描述步骤的内容。
- **预计完成时间（EstimatedCompletionTime）**：（可选字段）估计完成这个步骤所需要的时间。
- **实际开始时间（ActualStartTime）**：步骤实际开始的时间。
- **实际结束时间（ActualEndTime）**：步骤实际结束的时间。
- **步骤状态（Status）**：记录步骤的当前状态，例如未开始、进行中、已完成、暂停等。

这种设计允许步骤在不影响其他步骤的情况下自由添加和删除。步骤顺序字段（StepOrder）使得步骤的排序成为可能，你可以随时调整步骤的执行顺序。

### 数据库操作考虑：
- **添加步骤**：直接插入新的步骤记录到步骤表中，指定其任务ID和描述，系统自动为其分配一个新的步骤ID。如果需要指定顺序，也可以在插入时指定StepOrder。
- **删除步骤**：根据步骤ID直接删除记录，可能需要重新调整其他步骤的StepOrder。
- **修改步骤**：可以根据步骤ID更新步骤的描述、状态或预计和实际时间等信息。
- **重新排序步骤**：更新StepOrder来改变任务中步骤的执行顺序。

这样的设计不仅满足了任务步骤管理的需求，也提供了足够的灵活性来适应未来的功能扩展或调整。